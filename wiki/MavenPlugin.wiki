==Goals==

The maven plugin has two goals:

  * migrate:migrate - attempts to migrate the database to the latest version.
  * migrate:validate - checks to see if the database is up to date.

==Configuration==

|| *Option* || *Description* || *Required* || *Default* ||
|| defaultEnvironment || ... || No || default environment upon which all other environments are based ||
|| environments || Collection of one or more environments || Yes || N/A ||
|| environment/name || ... || Yes || N/A ||
|| environment/driver || JDBC driver class name (fully-qualified) || No || Autodetected from JDBC connection URL ||
|| environment/url|| JDBC connection url || Yes || Value set in default environment ||
|| environment/username|| Database username || Yes || Value set in default environment ||
|| environment/password|| Database password || Yes || Value set in default environment ||

The examples below will help make these configuration options more clear.

==Examples==

===Plugin Repository===

Before using the maven db migration plugin you'll need to add the following plugin repository:

{{{
<pluginRepositories>
  <pluginRepository>
    <id>c5-public-repository</id>
    <url>http://mvn.carbonfive.com/public</url>
  </pluginRepository>
...
</pluginRepositories>
}}}

===Simple Example===

A single environment using a MySQL database.

{{{
<plugin>
    <groupId>com.carbonfive</groupId>
    <artifactId>maven-migration-plugin</artifactId>
    <version>0.9-SNAPSHOT</version>
    <configuration>
        <defaultEnvironment>test</defaultEnvironment>
        <environments>
            <environment>
                <name>test</name>
                <driver>com.mysql.jdbc.Driver</driver>
                <url>jdbc:mysql://localhost/myapp_test</url>
                <username>dev</username>
                <password>dev</password>
            </environment>
        </environments>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.5</version>
        </dependency>
    </dependencies>
</plugin>
}}}

===Example===

Multiple environments, including a default, using a MySQL.

{{{
<plugin>
    <groupId>com.carbonfive</groupId>
    <artifactId>maven-migration-plugin</artifactId>
    <version>0.9-SNAPSHOT</version>
    <configuration>
        <defaultEnvironment>test</defaultEnvironment>
        <environments>
            <environment>
                <name>default</name>
                <driver>com.mysql.jdbc.Driver</driver>
                <username>dev</username>
                <password>dev</password>
            </environment>
            <environment>
                <name>test</name>
                <url>jdbc:mysql://localhost/adventure_planner_test</url>
            </environment>
            <environment>
                <name>development</name>
                <url>jdbc:mysql://localhost/adventure_planner_development</url>
            </environment>
        </environments>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.5</version>
        </dependency>
    </dependencies>
</plugin>
}}}